subprojects {
    apply plugin: 'java'
    apply plugin: 'maven-publish'

    sourceCompatibility = 1.8
    compileJava.options.encoding = 'UTF-8'

    repositories {
        mavenLocal()
        flatDir {
            dirs '../Libs'
        }
        mavenCentral()
    }

    dependencies {

        //Kernel Plugins for all Modules of Arematics
        compileOnly  name: 'SpigotServer'
        compileOnly  name: 'WorldEdit'
        compileOnly  name: 'WorldGuard'
        compileOnly  name: 'WGRegionEvents'

        testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: '5.6.1'
        testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: '5.6.1'
        testCompile group: 'org.mockito', name: 'mockito-core', version: '3.3.3'


    }

    jar {
        from {
            configurations.compile.collect {
                it.isDirectory() ? it : zipTree(it)
            }
        }
    }

    publishing {
        publications {
            maven(MavenPublication) {
                version = this.version
                from components.java
            }
        }


    }

    test {
        useJUnitPlatform()
    }
}
